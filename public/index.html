<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Presença - CEPAT</title>
    
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#0277BD">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f4f7f9; color: #333; }
        .container { max-width: 500px; margin: 0 auto; padding: 20px; background-color: #ffffff; min-height: 100vh; box-shadow: 0 0 15px rgba(0,0,0,0.05); }
        .header { text-align: center; padding-bottom: 20px; border-bottom: 1px solid #e0e0e0; }
        .header h1 { font-size: 1.5em; margin: 0; color: #0277BD; }
        .header p { margin: 5px 0 0; color: #555; }
        
        .mural {
            background-color: #fffbeb;
            border: 1px solid #fde68a;
            color: #78350f;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: left;
            white-space: pre-wrap;
            display: none; /* Começa escondido, o JS irá exibi-lo */
        }

        .form-section, .status-area { margin-top: 25px; }
        .form-section h2, .status-area h2 { font-size: 1.2em; color: #444; margin-bottom: 15px; display: flex; align-items: center; gap: 8px; }
        .status-area { text-align: center; } /* Centraliza o conteúdo da área de status */
        .status-area p { margin: 8px 0; color: #333; font-size: 1.1em; }
        .status-area a { color: #d32f2f; cursor: pointer; text-decoration: underline; margin-top: 20px; display: inline-block; }
        #feedback-geolocalizacao-rapido { font-weight: bold; min-height: 1.2em; font-size: 1.2em; }
        input[type="text"], input[type="email"], input[type="password"] { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 1em; }
        .btn { width: 100%; padding: 14px; border: none; border-radius: 8px; font-size: 1.1em; font-weight: bold; color: white; cursor: pointer; transition: background-color 0.3s; }
        .btn-primary { background-color: #0277BD; }
        .btn-secondary { background-color: #388e3c; }
        .btn-tertiary { background-color: transparent; color: #555; border: 1px solid #ccc; margin-top: 10px; }
        .divider { display: flex; align-items: center; text-align: center; margin: 30px 0; color: #aaa; }
        .divider::before, .divider::after { content: ''; flex: 1; border-bottom: 1px solid #e0e0e0; }
        .divider:not(:empty)::before { margin-right: .5em; }
        .divider:not(:empty)::after { margin-left: .5em; }
        .support-links { text-align: center; margin-top: 15px; font-size: 0.9em; }
        .support-links a { color: #0277BD; text-decoration: none; }
        .footer { margin-top: 30px; text-align: center; display: flex; flex-direction: column; gap: 15px; }
        #atividades-wrapper { display: none; border: 1px solid #ccc; border-radius: 8px; padding: 10px; margin-top: 10px; max-height: 150px; overflow-y: auto; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div class="container">
        <header class="header"><h1>CEPAT</h1><p>Casa Espírita Paulo de Tarso</p></header>
        
        <div class="mural" id="mural-container"></div>

        <div id="main-content-area">
            <section class="form-section" id="registro-rapido-section">
                <h2>➡️ Registro de Presença</h2>
                <form id="form-presenca-rapida">
                    <input type="text" id="nome-presenca" placeholder="Digite seu nome completo">
                    <button type="button" class="btn btn-tertiary" id="btn-selecionar-atividades">Selecione suas atividades ▼</button>
                    <div id="atividades-wrapper"><div id="atividades-container">Carregando atividades...</div></div>
                    <button type="submit" class="btn btn-primary" id="btn-registrar-presenca" style="margin-top: 15px;">Registrar Presença</button>
                </form>
            </section>
            
            <section class="status-area hidden" id="status-rapido-section">
                <h2>✅ Presença Registrada!</h2>
                <p><strong>Nome:</strong> <span id="status-nome"></span></p>
                <p><strong>Atividades:</strong> <span id="status-atividades"></span></p>
                <p id="feedback-geolocalizacao-rapido" style="margin-top: 25px; color: green;"></p>
                
                <a id="btn-sair-rapido">Sair / Registrar outra pessoa</a>
            </section>
        </div>

        <div class="divider">OU</div>

        <section class="form-section">
            <h2>⭐ Acesse o Portal do Voluntário</h2>
            <form id="form-login-portal">
                <input type="email" id="email-login" placeholder="Email">
                <input type="password" id="senha-login" placeholder="Senha">
                <button type="submit" class="btn btn-secondary">Entrar</button>
            </form>
            <div class="support-links">
                <a href="#" id="link-esqueci-senha">Esqueci minha senha</a> | <a href="/cadastro.html">Ainda não tem conta? <b>Crie aqui</b></a>
            </div>
        </section>

        <footer class="footer">
            <a href="/transparencia.html" class="btn btn-tertiary">Portal da Transparência</a>
            <a href="/vibracoes.html" class="btn btn-tertiary">Pedidos de Vibração</a>

            <button class="btn btn-tertiary" id="btn-ativar-notificacoes" style="margin-top: 10px; display: none;">
                <i class="fas fa-bell"></i> Ativar Notificações
            </button>
            </footer>
    </div>
    <script type="module" src="js/index.js"></script>
</body>
</html>